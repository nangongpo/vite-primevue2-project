import{f as a}from"./primevue2-z8ODENUo.js";import{i as n,j as l,b as d}from"./app.core-BOMZqaWx.js";import{n as c,L as u,c as p}from"./app.component-DQmWytpG.js";import"./@nangongpo-5I40lFwe.js";import"./whatwg-fetch-DzgvNDjV.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./prismjs-CUvZdSMw.js";const{isNavigationFailure:m,NavigationFailureType:h}=d,f={name:"Login",components:{Logo:u,ValidationObserver:n,ValidationProvider:l},data(){return this.settings=p,{loginForm:{username:"admin",password:"111111"},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(e){const s=e.query;s&&(this.redirect=s.redirect,this.otherQuery=this.getOtherQuery(s))},immediate:!0}},created(){},mounted(){this.loginForm.username===""?this.$refs.username.focus():this.loginForm.password===""&&this.$refs.password.focus()},unmounted(){},methods:{checkCapslock(e){const{key:s}=e;this.capsTooltip=s&&s.length===1&&s>="A"&&s<="Z"},showPwd(){this.passwordType==="password"?this.passwordType="":this.passwordType="password",this.$nextTick(()=>{this.$refs.password.focus()})},handleLogin(){this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then(()=>{this.$router.push({path:this.redirect||"/",query:this.otherQuery}).catch(e=>{m(e,h.redirected)||Promise.reject(e)}),this.loading=!1}).catch(()=>{this.loading=!1})},getOtherQuery(e){return Object.keys(e).reduce((s,t)=>(t!=="redirect"&&(s[t]=e[t]),s),{})}}};var g=function(){var s=this,t=s._self._c;return t("body",{staticClass:"login-body"},[t("div",{staticClass:"mobile-banner"},[t("Logo",{staticStyle:{height:"48px"},attrs:{label:""}})],1),t("div",{staticClass:"login-panel"},[t("Logo",{staticStyle:{height:"48px"},attrs:{label:""}})],1),t("div",{staticClass:"login-card"},[t("div",{staticClass:"top-border"}),t("ValidationObserver",{ref:"observer",scopedSlots:s._u([{key:"default",fn:function({handleSubmit:o}){return[t("form",{staticClass:"login-content",on:{submit:function(r){return r.preventDefault(),o(s.handleLogin)}}},[t("h1",[s._v("登录")]),t("p",[s._v("欢迎使用"+s._s(s.settings.title)+"系统")]),t("ValidationProvider",{staticClass:"username-container",attrs:{tag:"div",rules:"required",name:"loginForm.username"},scopedSlots:s._u([{key:"default",fn:function({errors:r}){return[t("label",[s._v("用户名")]),t("div",{staticClass:"login-input"},[t(a,{attrs:{placeholder:"请输入用户名"},model:{value:s.loginForm.username,callback:function(i){s.$set(s.loginForm,"username",i)},expression:"loginForm.username"}}),t("small",{staticClass:"p-invalid"},[s._v(s._s(r[0]))])],1)]}}],null,!0)}),t("ValidationProvider",{staticClass:"password-container",attrs:{tag:"div",rules:"required",name:"loginForm.password"},scopedSlots:s._u([{key:"default",fn:function({errors:r}){return[t("label",[s._v("密码")]),t("div",{staticClass:"login-input"},[t(a,{attrs:{type:"password",placeholder:"请输入密码"},model:{value:s.loginForm.password,callback:function(i){s.$set(s.loginForm,"password",i)},expression:"loginForm.password"}}),t("small",{staticClass:"p-invalid"},[s._v(s._s(r[0]))])],1)]}}],null,!0)}),t("div",{staticClass:"forgetpassword-container"},[t("a",{staticClass:"forget-password",attrs:{href:"#"}},[s._v("忘记密码?")])]),t("div",[t("Button",{attrs:{type:"submit",label:"登录"}})],1)],1)]}}])})],1)])},v=[],_=c(f,g,v,!1,null,"c6410f0a",null,null);const L=_.exports;export{L as default};
//# sourceMappingURL=Login-CrtmsgOB.js.map
