import{c as n,F as u,a7 as p,i as f,f as c,j as r,q as m,O as i,l as _,a,o as l}from"./primevue2-z8ODENUo.js";import{P as g}from"./ProductService-Cwx0hge7.js";import{n as h}from"./app.component-DQmWytpG.js";import"./whatwg-fetch-DzgvNDjV.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./app.core-BOMZqaWx.js";import"./@nangongpo-5I40lFwe.js";import"./prismjs-CUvZdSMw.js";const v={data(){return{products:null,productDialog:!1,deleteProductDialog:!1,deleteProductsDialog:!1,product:{},selectedProducts:null,filters:{},submitted:!1}},productService:null,created(){this.productService=new g},mounted(){this.productService.getProducts().then(o=>this.products=o)},methods:{formatCurrency(o){return o.toLocaleString("en-US",{style:"currency",currency:"USD"})},openNew(){this.product={},this.submitted=!1,this.productDialog=!0},hideDialog(){this.productDialog=!1,this.submitted=!1},saveProduct(){this.submitted=!0,this.product.name.trim()&&(this.product.id?(this.$set(this.products,this.findIndexById(this.product.id),this.product),this.$toast.add({severity:"success",summary:"提示",detail:"更新成功",life:3e3})):(this.product.id=this.createId(),this.product.code=this.createId(),this.product.image="product-placeholder.svg",this.product.inventoryStatus="INSTOCK",this.products.push(this.product),this.$toast.add({severity:"success",summary:"提示",detail:"新建成功",life:3e3})),this.productDialog=!1,this.product={})},editProduct(o){this.product={...o},this.productDialog=!0},confirmDeleteProduct(o){this.product=o,this.deleteProductDialog=!0},deleteProduct(){this.products=this.products.filter(o=>o.id!==this.product.id),this.deleteProductDialog=!1,this.product={},this.$toast.add({severity:"success",summary:"提示",detail:"删除成功",life:3e3})},findIndexById(o){let t=-1;for(let e=0;e<this.products.length;e++)if(this.products[e].id===o){t=e;break}return t},createId(){let o="";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)o+=t.charAt(Math.floor(Math.random()*t.length));return o},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deleteProductsDialog=!0},deleteSelectedProducts(){this.products=this.products.filter(o=>!this.selectedProducts.includes(o)),this.deleteProductsDialog=!1,this.selectedProducts=null,this.$toast.add({severity:"success",summary:"提示",detail:"删除成功",life:3e3})}}};var y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid crud-demo"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e(n),e(u,{staticClass:"mb-4",scopedSlots:t._u([{key:"start",fn:function(){return[e("Button",{staticClass:"p-button-success mr-2",attrs:{label:"新建",icon:"pi pi-plus"},on:{click:t.openNew}}),e("Button",{staticClass:"p-button-danger",attrs:{label:"删除",icon:"pi pi-trash",disabled:!t.selectedProducts||!t.selectedProducts.length},on:{click:t.confirmDeleteSelected}})]},proxy:!0},{key:"end",fn:function(){return[e(p,{staticClass:"mr-2 p-d-inline-block",attrs:{mode:"basic",accept:"image/*","max-file-size":1e6,"choose-label":"导入"}}),e("Button",{staticClass:"p-button-help",attrs:{label:"导出",icon:"pi pi-upload"},on:{click:function(s){return t.exportCSV(s)}}})]},proxy:!0}])}),e(f,{ref:"dt",staticClass:"p-datatable-customers",attrs:{selection:t.selectedProducts,value:t.products,"data-key":"id","row-hover":!0,paginator:!0,rows:10,filters:t.filters,"paginator-template":" FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink    RowsPerPageDropdown  CurrentPageReport","rows-per-page-options":[5,10,25],"current-page-report-template":" 显示第 {first} 到第 {last} 条记录，总共 {totalRecords} 条记录 "},on:{"update:selection":function(s){t.selectedProducts=s}},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"table-header"},[e("h5",{staticClass:"p-m-0"},[t._v(" 产品列表 ")]),e("span",{staticClass:"p-input-icon-left"},[e("i",{staticClass:"pi pi-search"}),e(c,{attrs:{placeholder:"检索..."},model:{value:t.filters.global,callback:function(s){t.$set(t.filters,"global",s)},expression:"filters['global']"}})],1)])]},proxy:!0}])},[e(r,{attrs:{"selection-mode":"multiple","header-style":"width: 3rem"}}),e(r,{attrs:{field:"code",header:"编码",sortable:""}}),e(r,{attrs:{field:"name",header:"名称",sortable:""}}),e(r,{attrs:{header:"图片"},scopedSlots:t._u([{key:"body",fn:function(s){return[e("img",{staticClass:"product-image",attrs:{src:t.$publicUrl("resource/demo/images/product/"+s.data.image),alt:s.data.image}})]}}])}),e(r,{attrs:{field:"price",header:"价格",sortable:""},scopedSlots:t._u([{key:"body",fn:function(s){return[t._v(" "+t._s(t.formatCurrency(s.data.price))+" ")]}}])}),e(r,{attrs:{field:"category",header:"类别",sortable:""}}),e(r,{attrs:{field:"rating",header:"评分",sortable:""},scopedSlots:t._u([{key:"body",fn:function(s){return[e(m,{attrs:{value:s.data.rating,readonly:!0,cancel:!1}})]}}])}),e(r,{attrs:{field:"inventoryStatus",header:"状态",sortable:""},scopedSlots:t._u([{key:"body",fn:function(s){return[e("span",{class:"product-badge status-"+s.data.inventoryStatus.toLowerCase()},[t._v(t._s(s.data.inventoryStatus))])]}}])}),e(r,{scopedSlots:t._u([{key:"body",fn:function(s){return[e("Button",{staticClass:"p-button-rounded p-button-success mr-2",attrs:{icon:"pi pi-pencil"},on:{click:function(d){return t.editProduct(s.data)}}}),e("Button",{staticClass:"p-button-rounded p-button-warning",attrs:{icon:"pi pi-trash"},on:{click:function(d){return t.confirmDeleteProduct(s.data)}}})]}}])})],1),e(i,{staticClass:"p-fluid",style:{width:"450px"},attrs:{"visible.sync":"productDialog",header:"产品详情",modal:!0},scopedSlots:t._u([{key:"footer",fn:function(){return[e("Button",{staticClass:"p-button-text",attrs:{label:"取消",icon:"pi pi-times"},on:{click:t.hideDialog}}),e("Button",{staticClass:"p-button-text",attrs:{label:"保存",icon:"pi pi-check"},on:{click:t.saveProduct}})]},proxy:!0}])},[t.product.image?e("img",{staticClass:"product-image",attrs:{src:t.$publicUrl("resource/demo/images/product/"+t.product.image),alt:t.product.image}}):t._e(),e("div",{staticClass:"field"},[e("label",{attrs:{for:"name"}},[t._v("名称")]),e(c,{class:{"p-invalid":t.submitted&&!t.product.name},attrs:{id:"name",required:"true",autofocus:""},model:{value:t.product.name,callback:function(s){t.$set(t.product,"name",typeof s=="string"?s.trim():s)},expression:"product.name"}}),t.submitted&&!t.product.name?e("small",{staticClass:"p-invalid"},[t._v("名称是必须的。")]):t._e()],1),e("div",{staticClass:"field"},[e("label",{attrs:{for:"description"}},[t._v("描述")]),e(_,{attrs:{id:"description",required:"true",rows:"3",cols:"20"},model:{value:t.product.description,callback:function(s){t.$set(t.product,"description",s)},expression:"product.description"}})],1),e("div",{staticClass:"field"},[e("label",{staticClass:"mb-3"},[t._v("分类")]),e("div",{staticClass:"formgrid grid"},[e("div",{staticClass:"field-radiobutton col-6"},[e(a,{attrs:{id:"category1",name:"category"},model:{value:t.product.category,callback:function(s){t.$set(t.product,"category",s)},expression:"product.category"}}),e("label",{attrs:{for:"category1"}},[t._v("穿戴配饰")])],1),e("div",{staticClass:"field-radiobutton col-6"},[e(a,{attrs:{id:"category2",name:"category"},model:{value:t.product.category,callback:function(s){t.$set(t.product,"category",s)},expression:"product.category"}}),e("label",{attrs:{for:"category2"}},[t._v("服装")])],1),e("div",{staticClass:"field-radiobutton col-6"},[e(a,{attrs:{id:"category3",name:"category"},model:{value:t.product.category,callback:function(s){t.$set(t.product,"category",s)},expression:"product.category"}}),e("label",{attrs:{for:"category3"}},[t._v("电子产品")])],1),e("div",{staticClass:"field-radiobutton col-6"},[e(a,{attrs:{id:"category4",name:"category"},model:{value:t.product.category,callback:function(s){t.$set(t.product,"category",s)},expression:"product.category"}}),e("label",{attrs:{for:"category4"}},[t._v("小饰品")])],1)])]),e("div",{staticClass:"formgrid grid"},[e("div",{staticClass:"field col"},[e("label",{attrs:{for:"price"}},[t._v("价格")]),e(l,{attrs:{id:"price",mode:"currency",currency:"USD",locale:"en-US"},model:{value:t.product.price,callback:function(s){t.$set(t.product,"price",s)},expression:"product.price"}})],1),e("div",{staticClass:"field col"},[e("label",{attrs:{for:"quantity"}},[t._v("数量")]),e(l,{attrs:{id:"quantity",integeronly:""},model:{value:t.product.quantity,callback:function(s){t.$set(t.product,"quantity",s)},expression:"product.quantity"}})],1)])]),e(i,{style:{width:"450px"},attrs:{visible:t.deleteProductDialog,header:"确认",modal:!0},on:{"update:visible":function(s){t.deleteProductDialog=s}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("Button",{staticClass:"p-button-text",attrs:{label:"否",icon:"pi pi-times"},on:{click:function(s){t.deleteProductDialog=!1}}}),e("Button",{staticClass:"p-button-text",attrs:{label:"是",icon:"pi pi-check"},on:{click:t.deleteProduct}})]},proxy:!0}])},[e("div",{staticClass:"confirmation-content"},[e("i",{staticClass:"pi pi-exclamation-triangle mr-3",staticStyle:{"font-size":"2rem"}}),t.product?e("span",[t._v("确认删除 "),e("b",[t._v(t._s(t.product.name))]),t._v("?")]):t._e()])]),e(i,{style:{width:"450px"},attrs:{visible:t.deleteProductsDialog,header:"确认",modal:!0},on:{"update:visible":function(s){t.deleteProductsDialog=s}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("Button",{staticClass:"p-button-text",attrs:{label:"否",icon:"pi pi-times"},on:{click:function(s){t.deleteProductsDialog=!1}}}),e("Button",{staticClass:"p-button-text",attrs:{label:"是",icon:"pi pi-check"},on:{click:t.deleteSelectedProducts}})]},proxy:!0}])},[e("div",{staticClass:"confirmation-content"},[e("i",{staticClass:"pi pi-exclamation-triangle mr-3",staticStyle:{"font-size":"2rem"}}),t.product?e("span",[t._v("确认删除所选项吗?")]):t._e()])])],1)])])},b=[],C=h(v,y,b,!1,null,"24081793",null,null);const q=C.exports;export{q as default};
//# sourceMappingURL=CrudDemo-DqYCNWQq.js.map
